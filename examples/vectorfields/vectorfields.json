{
    "signals": [
        {
            "from": [
                3,
                "Shader"
            ],
            "to": [
                1,
                "Shader"
            ]
        },
        {
            "from": [
                1,
                "Image 0"
            ],
            "to": [
                2,
                "Input"
            ]
        },
        {
            "from": [
                2,
                "Output"
            ],
            "to": [
                3,
                "vectorfield"
            ]
        },
        {
            "from": [
                1,
                "Mouse Pos"
            ],
            "to": [
                3,
                "mouse"
            ]
        },
        {
            "from": [
                6,
                "Output"
            ],
            "to": [
                3,
                "mouse_hist"
            ]
        },
        {
            "from": [
                1,
                "Image Size"
            ],
            "to": [
                3,
                "fieldsize"
            ]
        },
        {
            "from": [
                1,
                "Mouse Pressed"
            ],
            "to": [
                3,
                "pressed"
            ]
        },
        {
            "from": [
                8,
                "Value"
            ],
            "to": [
                3,
                "strength"
            ]
        },
        {
            "from": [
                5,
                "Value"
            ],
            "to": [
                3,
                "radius"
            ]
        },
        {
            "from": [
                18,
                "Value"
            ],
            "to": [
                3,
                "shape"
            ]
        },
        {
            "from": [
                19,
                "Value"
            ],
            "to": [
                3,
                "clear"
            ]
        },
        {
            "from": [
                1,
                "Mouse Pos"
            ],
            "to": [
                6,
                "Input"
            ]
        },
        {
            "from": [
                10,
                "Shader"
            ],
            "to": [
                9,
                "Shader"
            ]
        },
        {
            "from": [
                1,
                "Image 0"
            ],
            "to": [
                10,
                "vectorfield"
            ]
        },
        {
            "from": [
                24,
                "Output"
            ],
            "to": [
                10,
                "simfield"
            ]
        },
        {
            "from": [
                16,
                "Output"
            ],
            "to": [
                10,
                "colorin"
            ]
        },
        {
            "from": [
                12,
                "Delta"
            ],
            "to": [
                10,
                "dt"
            ]
        },
        {
            "from": [
                9,
                "Image Size"
            ],
            "to": [
                10,
                "texsize"
            ]
        },
        {
            "from": [
                9,
                "Mouse Pos"
            ],
            "to": [
                10,
                "mouse"
            ]
        },
        {
            "from": [
                9,
                "Mouse Pressed"
            ],
            "to": [
                10,
                "pressed"
            ]
        },
        {
            "from": [
                11,
                "Texture"
            ],
            "to": [
                10,
                "cookie"
            ]
        },
        {
            "from": [
                13,
                "Value"
            ],
            "to": [
                10,
                "radius"
            ]
        },
        {
            "from": [
                20,
                "Value"
            ],
            "to": [
                10,
                "pers"
            ]
        },
        {
            "from": [
                23,
                "Value"
            ],
            "to": [
                10,
                "clear"
            ]
        },
        {
            "from": [
                14,
                "Value"
            ],
            "to": [
                10,
                "speedmul"
            ]
        },
        {
            "from": [
                9,
                "Image 1"
            ],
            "to": [
                16,
                "Input"
            ]
        },
        {
            "from": [
                9,
                "Image 2"
            ],
            "to": [
                24,
                "Input"
            ]
        }
    ],
    "type": "cg-workbench-file",
    "version": "1.0",
    "windows": [
        {
            "depthtest": true,
            "rt0-settings": {
                "mag-filt": 9728,
                "min-filt": 9728,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "rt1-settings": {
                "mag-filt": 9728,
                "min-filt": 9728,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "rt2-settings": {
                "mag-filt": 0,
                "min-filt": 35,
                "wrap-r": 419,
                "wrap-s": 0,
                "wrap-t": 35
            },
            "rt3-settings": {
                "mag-filt": 0,
                "min-filt": 255,
                "wrap-r": 35,
                "wrap-s": 0,
                "wrap-t": 95
            },
            "scale": 9,
            "size": [
                512.0,
                512.0
            ],
            "tex-0": 32856,
            "tex-1": 32856,
            "tex-2": 32856,
            "tex-3": 32856,
            "type": "renderer",
            "window-id": 1,
            "window-pos": [
                979.0,
                64.0
            ],
            "window-size": [
                528.0,
                566.0
            ],
            "window-title": "Render Window",
            "wireframe": false
        },
        {
            "filter": {
                "mag-filt": 9729,
                "min-filt": 9729,
                "wrap-r": 33071,
                "wrap-s": 33071,
                "wrap-t": 33071
            },
            "type": "image-buffer",
            "window-id": 2,
            "window-pos": [
                513.0,
                858.0
            ],
            "window-size": [
                297.0,
                163.0
            ],
            "window-title": "Image Buffer"
        },
        {
            "items": [
                {
                    "code": "#version 330\nlayout(location = 0) in vec3 vPosition;\nlayout(location = 1) in vec3 vNormal;\nlayout(location = 2) in vec2 vUV;\n\nout vec3 position;\nout vec3 normal;\nout vec2 uv;\n\nuniform mat4 transform;\n\nvoid main() {\n\tposition = vPosition;\n\tnormal = vNormal;\n\tuv = vUV;\n\tgl_Position = transform * vec4(position, 1.0);\n}\n",
                    "type": 35633
                },
                {
                    "code": "#version 330\nout vec4 color;\n\nin vec3 position;\nin vec3 normal;\nin vec2 uv;\n\nuniform sampler2D vectorfield;\n\nuniform vec2 mouse;\nuniform vec2 mouse_hist;\nuniform vec2 fieldsize;\nuniform float pressed;\nuniform float strength;\n\nuniform float radius;\nuniform float shape;\n\nuniform float clear;\n\nvoid main()\n{\n\tvec2 pix = fieldsize * uv;\n\t\n\tcolor.rg = texture(vectorfield, uv).rg;\n\tcolor.ba = vec2(0,1);\n\n\n\t{ // draw circle\n\t\tfloat d = length(mouse - pix);\n\t\tif(d <= radius + 0.5 && d >= radius - 0.5)\n\t\t{\n\t\t\tcolor.b = 1;\n\t\t}\n\t\tif(pressed > 0 && d <= radius && length(mouse - mouse_hist) > 2.0)\n\t\t{\n\t\t\tfloat s = pow(1.0 - d / radius, shape);\n\t\t\tvec2 vel = normalize(mouse - mouse_hist);\n\t\t\tcolor.rg = normalize(\n\t\t\t\tcolor.rg +\n\t\t\t\tvel * strength * s);\n\t\t}\n\t}\n\tcolor = mix(\n\t\tcolor,\n\t\tvec4(0, 0, 0, 1.0),\n\t\tclear);\n}\n",
                    "type": 35632
                }
            ],
            "type": "shader",
            "window-id": 3,
            "window-pos": [
                393.0,
                264.0
            ],
            "window-size": [
                525.0,
                640.0
            ],
            "window-title": "Shader Editor"
        },
        {
            "type": "uniform-float",
            "value": 49.120002746582,
            "window-id": 5,
            "window-pos": [
                58.0,
                132.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Brush Size (Pixels)"
        },
        {
            "length": 4.0,
            "smooth": false,
            "type": "buffer-vec2",
            "useTime": false,
            "window-id": 6,
            "window-pos": [
                76.0,
                353.0
            ],
            "window-size": [
                269.0,
                138.0
            ],
            "window-title": "Buffer"
        },
        {
            "type": "uniform-float",
            "value": 8.68000030517578,
            "window-id": 8,
            "window-pos": [
                66.0,
                199.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Brush Strength"
        },
        {
            "depthtest": true,
            "rt0-settings": {
                "mag-filt": 9728,
                "min-filt": 9728,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "rt1-settings": {
                "mag-filt": 9728,
                "min-filt": 9728,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "rt2-settings": {
                "mag-filt": 9728,
                "min-filt": 9728,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "rt3-settings": {
                "mag-filt": 0,
                "min-filt": 0,
                "wrap-r": 0,
                "wrap-s": 0,
                "wrap-t": 0
            },
            "scale": 9,
            "size": [
                512.0,
                512.0
            ],
            "tex-0": 32856,
            "tex-1": 32856,
            "tex-2": 32856,
            "tex-3": 32856,
            "type": "renderer",
            "window-id": 9,
            "window-pos": [
                988.0,
                674.0
            ],
            "window-size": [
                528.0,
                566.0
            ],
            "window-title": "Render Window",
            "wireframe": false
        },
        {
            "items": [
                {
                    "code": "#version 330\nlayout(location = 0) in vec3 vPosition;\nlayout(location = 1) in vec3 vNormal;\nlayout(location = 2) in vec2 vUV;\n\nout vec3 position;\nout vec3 normal;\nout vec2 uv;\n\nuniform mat4 transform;\n\nvoid main() {\n\tposition = vPosition;\n\tnormal = vNormal;\n\tuv = vUV;\n\tgl_Position = transform * vec4(position, 1.0);\n}\n",
                    "type": 35633
                },
                {
                    "code": "#version 330\nlayout(location = 0) out vec4 color;\nlayout(location = 1) out vec4 particles;\nlayout(location = 2) out vec4 velocity;\n\nin vec3 position;\nin vec3 normal;\nin vec2 uv;\n\nuniform sampler2D vectorfield;\nuniform sampler2D simfield;\nuniform sampler2D colorin;\nuniform float dt;\nuniform vec2 texsize;\n\nuniform vec2 mouse;\nuniform float pressed;\nuniform sampler2D cookie;\nuniform float radius;\n\nuniform float pers;\nuniform float lmix;\n\nuniform float clear;\n\nuniform float speedmul;\n\nvec2 up(vec2 i) { return 2.0 * i - 1.0; }\n\nvoid main() {\n\n\tvec2 pix = uv * texsize;\n\tvec2 muv = mouse / texsize;\n\n\tvec2 fvel = speedmul * texture(vectorfield, uv).xy;\n\tvec2 pvel = texture(simfield, uv).xy;\n\n\tvec2 vel = fvel + pvel;\n\n\t\n\n\tvec2 uv_t = uv - dt * vel / texsize;\n\n\tvelocity = (1.0 - clear) * texture(\n\t\tsimfield, \n\t\tuv_t);\n\n\tvelocity.b -= dt;\n\n\tparticles = (1.0 - clear) * texture(\n\t\tcolorin, \n\t\tuv_t);\n\n\tvec2 cuv = (radius - (mouse - pix)) / (2 * radius);\n\n\tvec4 cc = texture(cookie, cuv);\n\n\tcolor = particles;\n\n\tcolor.a = velocity.b / pers;\n\n\t{ // draw circle\n\t\tfloat d = length(mouse - pix);\n\t\tif(d <= radius + 0.5 && d >= radius - 0.5)\n\t\t{\n\t\t\tcolor.r = 1;\n\t\t\tcolor.a = 1;\n\t\t}\n\t\tif(d <= radius) {\n\t\t\tcolor = mix(\n\t\t\t\tcolor,\n\t\t\t\tcc,\n\t\t\t\tcc.a);\n\t\t}\n\t}\n\n\tif(pressed > 0)\n\t{\n\t\tparticles = mix(\n\t\t\tparticles,\n\t\t\tvec4(cc.rgb,1.0),\n\t\t\tcc.a);\n\t\tvelocity = mix(\n\t\t\tvelocity,\n\t\t\tvec4(0,0,pers,0),\n\t\t\tcc.a);\n\t}\n}\n",
                    "type": 35632
                }
            ],
            "type": "shader",
            "window-id": 10,
            "window-pos": [
                2116.0,
                659.0
            ],
            "window-size": [
                537.0,
                763.0
            ],
            "window-title": "Shader Editor"
        },
        {
            "file": "/home/felix/projects/cg-workbench/examples/vectorfields/cookie.png",
            "filter": {
                "mag-filt": 9729,
                "min-filt": 9729,
                "wrap-r": 33071,
                "wrap-s": 33071,
                "wrap-t": 33071
            },
            "type": "image",
            "window-id": 11,
            "window-pos": [
                1582.0,
                1082.0
            ],
            "window-size": [
                297.0,
                425.0
            ],
            "window-title": "Image"
        },
        {
            "current": 2216.45849609375,
            "speed": 1.0,
            "type": "timer",
            "window-id": 12,
            "window-pos": [
                1571.0,
                370.0
            ],
            "window-size": [
                262.0,
                94.0
            ],
            "window-title": "Timer"
        },
        {
            "type": "uniform-float",
            "value": 32.0,
            "window-id": 13,
            "window-pos": [
                1573.0,
                720.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Cookie (Radius)"
        },
        {
            "type": "uniform-float",
            "value": 64.0,
            "window-id": 14,
            "window-pos": [
                1592.0,
                585.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Liquid Speed"
        },
        {
            "filter": {
                "mag-filt": 9729,
                "min-filt": 9729,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "type": "image-buffer",
            "window-id": 16,
            "window-pos": [
                1589.0,
                185.0
            ],
            "window-size": [
                297.0,
                163.0
            ],
            "window-title": "Image Buffer"
        },
        {
            "type": "uniform-float",
            "value": 2.15000009536743,
            "window-id": 18,
            "window-pos": [
                67.0,
                273.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Brush Shape"
        },
        {
            "type": "trigger",
            "window-id": 19,
            "window-pos": [
                836.0,
                49.0
            ],
            "window-size": [
                58.0,
                54.0
            ],
            "window-title": "Clear"
        },
        {
            "type": "uniform-float",
            "value": 10.0,
            "window-id": 20,
            "window-pos": [
                1591.0,
                514.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Particle Lifetime"
        },
        {
            "type": "uniform-float",
            "value": 0.110000006854534,
            "window-id": 21,
            "window-pos": [
                1585.0,
                642.0
            ],
            "window-size": [
                262.0,
                54.0
            ],
            "window-title": "Liquid Mixing"
        },
        {
            "type": "trigger",
            "window-id": 23,
            "window-pos": [
                1936.0,
                499.0
            ],
            "window-size": [
                58.0,
                54.0
            ],
            "window-title": "Clear"
        },
        {
            "filter": {
                "mag-filt": 9728,
                "min-filt": 9728,
                "wrap-r": 10497,
                "wrap-s": 10497,
                "wrap-t": 10497
            },
            "type": "image-buffer",
            "window-id": 24,
            "window-pos": [
                1604.0,
                833.0
            ],
            "window-size": [
                297.0,
                163.0
            ],
            "window-title": "Image Buffer"
        },
        {
            "items": [
                {
                    "code": "#version 330\nlayout(location = 0) in vec3 vPosition;\nlayout(location = 1) in vec3 vNormal;\nlayout(location = 2) in vec2 vUV;\n\nout vec3 position;\nout vec3 normal;\nout vec2 uv;\n\nuniform mat4 transform;\n\nvoid main() {\n\tposition = vPosition;\n\tnormal = vNormal;\n\tuv = vUV;\n\tgl_Position = transform * vec4(position, 1.0);\n}\n",
                    "type": 35633
                },
                {
                    "code": "#version 330\nout vec4 color;\n\nin vec3 position;\nin vec3 normal;\nin vec2 uv;\n\nvoid main() {\n\tcolor = vec4(uv,0,1);\n}\n",
                    "type": 35632
                }
            ],
            "type": "shader",
            "window-id": 25,
            "window-pos": [
                419.0,
                32.0
            ],
            "window-size": [
                141.0,
                96.0
            ],
            "window-title": "Shader Editor"
        }
    ]
}
